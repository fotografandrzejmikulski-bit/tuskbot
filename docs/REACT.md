# AGENT


// обработка ввода
1. Получить ембединг пользовательского запроса
2. Сохранить сообщение в messages

// получение контекста
3. Сделать поиск по контексту (в knowledge, messages) по этому ембедингу
4. Собрать кусок контекста (facts + history)

// стартуем ReAct loop
5. получаем список тулов (внутри лупа для динамики)
6. читаем статику с диска (SYSTEM, IDENTITY, USER)
7. получаем последние сообщения (messages sliding window)
8. отправляем запрос в Модель
9. Сохраняем ответ модели в таблицу
10. Вызываем коллбек телеграм (ответить юзеру)
11. Взываем тулинг в цикле
    11.1. Обрезаем вывод
    11.2. Сохраняем вызов тулинга в базу